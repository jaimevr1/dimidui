# Story 4.1: Dashboard do Professor - Visão Geral e Individual

- **Status**: Draft
- **Epic**: 4
- **Release**: 1.0

## Story
As a: Professor,
I want: Um dashboard que mostre o desempenho geral da minha turma e me permita aprofundar nos dados de cada aluno,
so that: Eu possa identificar rapidamente quem precisa de mais ajuda e em quais habilidades.

## Acceptance Criteria
1.  O `professor-dashboard.html` deve exibir os KPIs da turma (alunos ativos, acurácia média, etc.).
2.  O dashboard deve mostrar um gráfico ou lista com a maestria média da turma por habilidade BNCC.
3.  Uma lista de alunos deve permitir clicar em um aluno para ver sua página de detalhes.
4.  A página de detalhes do aluno deve mostrar seu progresso geral, maestria por habilidade e um histórico de atividades.

## Dev Notes

### Views do Banco de Dados
Esta funcionalidade depende fortemente das views `concept_mastery` and `student_progress_summary` que já foram criadas no banco de dados. As queries do frontend devem ser feitas diretamente a essas views para obter os dados agregados de forma eficiente.

- **Fonte**: `docs/architecture/5-database-schema.md`

### Estrutura da Página
A página `professor-dashboard.html` será a central de informações. Ela terá diferentes seções para cada tipo de dado (KPIs, BNCC, lista de alunos). A página de detalhes do aluno pode ser uma nova página (`professor-aluno-detalhe.html`) ou uma seção que aparece dinamicamente na mesma página.

- **Fonte**: `docs/prd/user-interface-design-goals.md`

### Visualização de Dados
Para a visualização da maestria em BNCC (AC: 2), uma biblioteca de gráficos simples como a `Chart.js` pode ser utilizada para criar gráficos de barra, ou pode ser implementado com HTML/CSS simples, como sugerido no wireframe da especificação.

- **Fonte**: `docs/dimidui_spec.md#6-dashboard-professor`

## Tasks / Subtasks

1.  **Criar a Página do Dashboard do Professor (AC: 1, 3)**
    - [ ] Crie o arquivo `professor-dashboard.html`.
    - [ ] Crie um script `/scripts/professor-dashboard.js` e o inclua no HTML.
    - [ ] No script, implemente uma função para buscar os dados da view `student_progress_summary`.
    - [ ] Renderize os KPIs gerais (total de alunos, acurácia média da turma) em cards no topo da página.
    - [ ] Renderize os dados de cada aluno da view em uma lista ou tabela. Cada item da lista deve ser um link para a página de detalhes do aluno (ex: `professor-aluno-detalhe.html?id=<student_id>`).

2.  **Implementar a Visualização de BNCC (AC: 2)**
    - [ ] No script `professor-dashboard.js`, implemente uma função para buscar os dados da view `concept_mastery`.
    - [ ] Agrupe os dados por `bncc_code` para calcular a média da turma para cada habilidade.
    - [ ] Renderize os resultados em uma lista, mostrando o nome da habilidade e a acurácia média da turma, possivelmente com uma barra de progresso em CSS.

3.  **Criar a Página de Detalhes do Aluno (AC: 4)**
    - [ ] Crie o arquivo `professor-aluno-detalhe.html`.
    - [ ] Crie um script para esta página.
    - [ ] O script deve pegar o `student_id` da URL.
    - [ ] Faça as chamadas ao Supabase para buscar:
        - Os dados de progresso geral da view `student_progress_summary` para aquele aluno.
        - Os dados de maestria em BNCC da view `concept_mastery` para aquele aluno.
        - O histórico de atividades da tabela `student_attempts` para aquele aluno.
    - [ ] Renderize todas essas informações na página, organizadas em seções claras.

4.  **Verificação Manual**
    - [ ] Popule o banco de dados com várias tentativas de vários alunos de teste.
    - [ ] Acesse o `professor-dashboard.html` e verifique se os KPIs gerais parecem corretos.
    - [ ] Verifique se a lista de maestria BNCC reflete a média dos dados inseridos.
    - [ ] Clique em um aluno na lista.
    - [ ] Na página de detalhes, verifique se o progresso geral, as habilidades BNCC e o histórico de atividades correspondem aos dados daquele aluno específico no banco de dados.
